# Supabase Scripts 使用说明

## 📁 文件说明

### 1. 🚀 `execute_supabase_update.sql` (主要脚本)
- **用途**: 一键更新数据库，添加社区个人信息卡片相关字段
- **使用方法**: 
  1. 登录 Supabase 控制台
  2. 进入 **SQL Editor** 页面
  3. 复制此文件的全部内容
  4. 粘贴到 SQL Editor 中
  5. 点击 **Run** 按钮执行
- **包含功能**: 
  - 数据库字段更新
  - 安全策略设置
  - 自动验证结果
  - 详细执行日志

### 2. 🔍 `supabase_verify_script.sql` (验证脚本)
- **用途**: 独立验证数据库更新结果
- **使用方法**: 在 Supabase SQL Editor 中执行
- **使用场景**: 
  - 验证更新是否成功
  - 检查数据库状态
  - 排查问题时使用

### 3. 📖 `SUPABASE_UPDATE_GUIDE.md` (详细指南)
- **用途**: 完整的操作指南和故障排除文档
- **内容**: 
  - 详细的操作步骤
  - 常见问题解答
  - 回滚方案
  - 验证清单

## 🎯 快速开始

### 推荐流程：
1. **阅读指南** → 打开 `SUPABASE_UPDATE_GUIDE.md`
2. **执行更新** → 运行 `execute_supabase_update.sql`
3. **验证结果** → 查看执行结果中的验证信息

### 注意事项：
- ⚠️ 这些脚本是用于在 **Supabase Web控制台** 中手动执行的
- ⚠️ **不是** supabase CLI 的迁移文件
- ⚠️ 执行前建议备份数据
- ⚠️ 确保你有项目的管理员权限

## 📋 执行检查清单

执行前确认：
- [ ] 已登录 Supabase 控制台
- [ ] 具有项目管理员权限
- [ ] 已备份重要数据
- [ ] 处于正确的项目中

执行后验证：
- [ ] 看到 "✅ 已添加字段" 的成功消息
- [ ] 验证查询显示7个新字段
- [ ] 应用可以正常启动
- [ ] 个人资料页面功能正常

## 🆘 遇到问题？

1. 检查执行结果中的错误消息
2. 参考 `SUPABASE_UPDATE_GUIDE.md` 中的故障排除部分
3. 确认数据库权限和连接状态
4. 如有疑问，可以重新执行验证脚本

## 🧹 清理

数据库更新完成并验证无误后，可以：
1. 删除这个 `scripts` 目录（可选）
2. 保留 `setup_database.sql` 作为完整的数据库模式参考 