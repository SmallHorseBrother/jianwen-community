# ğŸš€ ç¤¾åŒº V2.0 é‡æ„æŒ‡å—

## æ¦‚è¿°

æœ¬æ¬¡é‡æ„å°†é¡¹ç›®ä»"å¥èº«+å­¦ä¹ ç¤¾åŒº"è½¬å‹ä¸ºä»¥**é©¬å¥æ–‡æ•°å­—åˆ†èº« & Q&Aæé—®ç®±**ä¸ºæ ¸å¿ƒçš„æ–°ç‰ˆæœ¬ã€‚

---

## ğŸ“‹ æ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“å‡çº§

åœ¨ Supabase SQL ç¼–è¾‘å™¨ä¸­æ‰§è¡Œä»¥ä¸‹è¿ç§»è„šæœ¬ï¼š

```
supabase/migrations/20251218_v2_community_upgrade.sql
```

**è„šæœ¬å†…å®¹ï¼š**
1. åˆ›å»º `questions` è¡¨ï¼ˆQ&A æé—®ç®±ï¼‰
2. æ›´æ–° `profiles` è¡¨ï¼ˆæ·»åŠ å¾®ä¿¡å·ã€æ ‡ç­¾ã€ä¾›éœ€å…³ç³»å­—æ®µï¼‰
3. åˆ›å»º `admin_users` è¡¨ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰
4. é…ç½® RLS å®‰å…¨ç­–ç•¥

**âš ï¸ é‡è¦ï¼š** æ‰§è¡Œå®Œ SQL åï¼Œéœ€è¦æ‰‹åŠ¨å°†ä½ çš„ç”¨æˆ· ID æ·»åŠ åˆ° `admin_users` è¡¨ï¼š

```sql
INSERT INTO admin_users (user_id, role) VALUES ('ä½ çš„ç”¨æˆ·UUID', 'super_admin');
```

---

### ç¬¬äºŒæ­¥ï¼šæ–°å¢æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `src/pages/QAHome.tsx` | Q&A ä¸»é¡µï¼ˆæ•°å­—å¤§è„‘ï¼‰ |
| `src/pages/QADetail.tsx` | é—®ç­”è¯¦æƒ…é¡µ |
| `src/pages/AdminQA.tsx` | Q&A ç®¡ç†åå° |
| `src/pages/CommunityV2.tsx` | ç¤¾åŒºå¹¿åœºï¼ˆåç‰‡å¢™ï¼‰ |
| `src/pages/Tools.tsx` | å·¥å…·ç®±é¡µé¢ |
| `src/services/questionService.ts` | Q&A æœåŠ¡å±‚ |
| `supabase/migrations/20251218_v2_community_upgrade.sql` | æ•°æ®åº“è¿ç§» |

---

### ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|---------|---------|
| `src/App.tsx` | æ›´æ–°è·¯ç”±é…ç½® |
| `src/components/Layout/Header.tsx` | æ›´æ–°å¯¼èˆªæ  |
| `src/lib/database.types.ts` | æ·»åŠ æ–°è¡¨ç±»å‹å®šä¹‰ |
| `src/types/index.ts` | æ›´æ–° User ç±»å‹ |
| `src/contexts/AuthContext.tsx` | æ”¯æŒæ–°å­—æ®µ |
| `src/pages/Profile.tsx` | æ·»åŠ  V2.0 è¡¨å•å­—æ®µ |

---

## ğŸ—ºï¸ æ–°è·¯ç”±ç»“æ„

| è·¯ç”± | é¡µé¢ | è¯´æ˜ |
|------|------|------|
| `/` | QAHome | ä¸»é¡µ - Q&A æ•°å­—å¤§è„‘ |
| `/qa/:id` | QADetail | é—®ç­”è¯¦æƒ…é¡µ |
| `/community` | CommunityV2 | ç¤¾åŒºå¹¿åœº - åç‰‡å¢™ |
| `/tools` | Tools | å·¥å…·ç®± |
| `/profile` | Profile | ä¸ªäººèµ„æ–™ï¼ˆå·²å‡çº§ï¼‰ |
| `/admin/qa` | AdminQA | Q&A ç®¡ç†åå° |
| `/fitness` | FitnessHome | å¥èº«ï¼ˆå½’æ¡£ï¼‰ |
| `/learning` | LearningHome | å­¦ä¹ ï¼ˆå½’æ¡£ï¼‰ |

---

## ğŸ”§ æ–°å¢æ•°æ®åº“å­—æ®µ

### `profiles` è¡¨æ–°å¢å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `wechat_id` | text | å¾®ä¿¡å·ï¼ˆé€‰å¡«ï¼‰ |
| `tags` | text[] | ä¸ªäººæ ‡ç­¾æ•°ç»„ |
| `skills_offering` | text | æˆ‘èƒ½æä¾›ä»€ä¹ˆ |
| `skills_seeking` | text | æˆ‘æ­£åœ¨å¯»æ‰¾ä»€ä¹ˆ |

### `questions` è¡¨ï¼ˆæ–°å»ºï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | uuid | ä¸»é”® |
| `content` | text | é—®é¢˜å†…å®¹ |
| `answer` | text | å›ç­”ï¼ˆæ”¯æŒ Markdownï¼‰ |
| `status` | text | pending/published/ignored |
| `asker_id` | uuid | æé—®è€… IDï¼ˆå¯ç©º=åŒ¿åï¼‰ |
| `asker_nickname` | text | æé—®è€…æ˜µç§° |
| `is_anonymous` | boolean | æ˜¯å¦åŒ¿å |
| `tags` | text[] | æ ‡ç­¾æ•°ç»„ |
| `view_count` | integer | æµè§ˆæ¬¡æ•° |
| `is_featured` | boolean | æ˜¯å¦ç²¾é€‰ |
| `answered_at` | timestamptz | å›ç­”æ—¶é—´ |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **æµ‹è¯• Q&A åŠŸèƒ½**ï¼šæé—®ã€å›ç­”ã€å‘å¸ƒæµç¨‹
2. **æµ‹è¯•ç¤¾åŒºåç‰‡**ï¼šæ–°å­—æ®µå±•ç¤ºã€æœç´¢åŠŸèƒ½
3. **é…ç½®ç®¡ç†å‘˜**ï¼šæ·»åŠ ä½ çš„ç”¨æˆ· ID åˆ° admin_users
4. **ä¼˜åŒ– UI**ï¼šæ ¹æ®å®é™…ä½¿ç”¨è°ƒæ•´æ ·å¼

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2025-12-18*
